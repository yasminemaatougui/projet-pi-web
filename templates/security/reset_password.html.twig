{% extends 'base.html.twig' %}

{% block title %}Réinitialiser le mot de passe — Art Connect{% endblock %}

{% block guest_wrapper_open %}{% endblock %}
{% block guest_wrapper_close %}{% endblock %}

{% block body %}
{% include 'security/_auth_styles.html.twig' %}

<div class="auth-page">
    <div class="auth-card narrow">
        <div class="auth-brand">
            <i class="fas fa-palette"></i><span>Art Connect</span>
        </div>

        <div class="auth-icon-circle purple">
            <i class="fas fa-shield-alt"></i>
        </div>

        <h2>Vérification du code</h2>
        <p class="auth-sub">Entrez le code reçu par email puis votre nouveau mot de passe.</p>

        {% if errors is defined and errors is not empty %}
            <div class="auth-errors" style="margin-bottom:.8rem;">
                <ul>
                    {% for error in errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}

        <form method="post" novalidate>
            <div class="af">
                <label for="email">Email</label>
                <div class="af-wrap">
                    <i class="fas fa-envelope af-icon"></i>
                    <input type="email" id="email" name="email" class="form-control"
                           value="{{ prefill_email|default('') }}" autocomplete="email" placeholder="votre@email.com">
                </div>
            </div>

            <div class="af">
                <label for="code">Code de vérification</label>
                <div class="af-wrap">
                    <i class="fas fa-hashtag af-icon"></i>
                    <input type="text" id="code" name="code" class="form-control"
                           maxlength="6" inputmode="numeric" placeholder="123456"
                           style="letter-spacing:.3rem; font-weight:700; text-align:center; padding-left:.75rem;">
                </div>
            </div>

            <div class="af">
                <label for="password">Nouveau mot de passe</label>
                <div class="af-wrap">
                    <i class="fas fa-lock af-icon"></i>
                    <input type="password" id="password" name="password" class="form-control"
                           autocomplete="new-password" placeholder="Min. 6 caractères">
                </div>
            </div>

            <div class="af">
                <label for="confirmPassword">Confirmer le mot de passe</label>
                <div class="af-wrap">
                    <i class="fas fa-lock af-icon"></i>
                    <input type="password" id="confirmPassword" name="confirm_password" class="form-control"
                           autocomplete="new-password" placeholder="Confirmer">
                </div>
            </div>

            <button type="submit" class="btn-auth">Réinitialiser</button>
        </form>

        <div class="auth-footer" style="margin-top:.8rem;">
            <a href="{{ path('app_forgot_password') }}"><i class="fas fa-redo me-1"></i>Renvoyer un code</a>
            <span style="color:#d1d5db; margin:0 .4rem;">|</span>
            <a href="{{ path('login') }}">Connexion</a>
        </div>
    </div>
</div>
{% endblock %}
